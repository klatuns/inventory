<%- include('partials/header'); -%>
<div class="container">
  <header class="jumbotron">
    <a href="/logout" class="btn btn-danger" id="logout"> Logout </a>
    
    <h1 id="form" class="addProd">ADDING PRODUCTS</h1>

    <form action="/sale" method="POST" id="form">
      <input class="form-control-sm" type="text" name="code" id="code" placeholder="Product Code" minlength="3" maxlength="20" required>
      <input class="form-control-sm" type="text" name="name" id="name" placeholder="Product Name" required>
      <input class="form-control-sm" type="number" name="price" id="price" placeholder="Product Price" min="0" required>
      <input class="form-control-sm" type="number" name="quantity" id="quantity" placeholder="Quantity Available" min="0"
        required>
      <input class="form-control-sm" type="description" name="description" id="description"
        placeholder="Product Description" required>
      <button class="btn btn-secondary btn-sm">Add Product</button>
      <a href="/sale" class="btn btn-dark btn-sm" id="sale">Sale Page</a>
    </form>

    <br>
    <div class="container">
      <h1>PRODUCT LIST</h1>


      <input class="form-control" id="myInput" type="text" placeholder="Search for products..">
      <br>
      <table id="myTable" class="table table-bordered table-striped">
        <thead class="thead-dark">
          <tr class="header">
            <th onclick="sortTable(0)" scope="col">CODE</th>
            <th onclick="sortTable(1)" scope="col">PRODUCT</th>
            <th onclick="sortTable(2)" scope="col">PRICE</th>
            <th onclick="sortTable(3)" scope="col">QUANTITY</th>
            <th scope="col">DESCRIPTION</th>
            <th scope="col">ACTIONS</th>

          </tr>
        </thead>
        <% products.forEach(function(prod){ %>
        <tbody id="myTable">
          <tr>
            <td><%= prod.code %></td>
            <td><%= prod.name.toUpperCase() %></td>
            <td>NGN <%= prod.price %> </td>
            <td><%= prod.quantity %></td>
            <td><%= prod.description.toUpperCase() %></td>

            <td>
              <a class="btn btn-sm btn-info" id="edit" href="/sale/<%= prod._id %>/edit">Update</a>
              <!-- Button trigger modal -->
              <button type="button" class="btn btn-sm btn-secondary" data-toggle="modal" data-target="#exampleModal">
                Delete
              </button>

              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Delete Product</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete the product?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">Close</button>
                      <form id="delete-form" action="/sale/<%= prod._id %>?_method=DELETE" method="POST">
                        <input id="" type="submit" class="btn btn-sm btn-danger" value="Delete">
                      </form>
                    </div>
                  </div>
                </div>
              </div>

            </td>
          </tr>
        </tbody>
        <% }); %>
      </table>

    </div>

  </header>
</div>



<script>
  $(document).ready(function () {
    $("#myInput").on("keyup", function () {
      var value = $(this).val().toLowerCase();
      $("#myTable tr").filter(function () {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
      });
    });
  });


 

</script>



<%- include('partials/footer'); -%>